<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Transactions - TIKTAK</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>
<body>
    <div class="app-container">
        <nav class="navbar">
            <div class="logo">
                <i class="fas fa-video"></i> <span class="logo-text">TIKTAK Transactions</span>
            </div>
            <div class="nav-right">
                <a href="index.html" class="btn btn-primary">
                    <i class="fas fa-home"></i> Retour √† l'accueil
                </a>
            </div>
        </nav>

        <main class="main-content" style="padding: 20px;">
            <div class="transactions-container">
                <h1>üìä Transactions des Cadeaux</h1>
                
                <div class="stats-overview">
                    <div class="stat-card">
                        <div class="stat-icon">üí∞</div>
                        <div class="stat-content">
                            <h3>Total Revenus</h3>
                            <div class="stat-amount" id="totalRevenue">0$</div>
                        </div>
                    </div>
                    
                    <div class="stat-card">
                        <div class="stat-icon">üëë</div>
                        <div class="stat-content">
                            <h3>Part Cr√©ateurs</h3>
                            <div class="stat-amount" id="creatorShare">0$</div>
                        </div>
                    </div>
                    
                    <div class="stat-card">
                        <div class="stat-icon">üè¢</div>
                        <div class="stat-content">
                            <h3>Part Propri√©taire</h3>
                            <div class="stat-amount" id="ownerShare">0$</div>
                        </div>
                    </div>
                </div>

                <div class="transactions-list" id="transactionsList">
                    <!-- Les transactions seront charg√©es ici -->
                </div>
            </div>
        </main>
    </div>

    <script>
        // Charger les transactions
        function loadTransactions() {
            const stats = window.parent.GiftShop.getGiftStats();
            const transactions = window.parent.StorageManager.loadGiftTransactions();
            
            // Mettre √† jour les stats
            document.getElementById('totalRevenue').textContent = 
                `$${(stats.totalCoinsSpent / 10).toFixed(2)}`;
            document.getElementById('creatorShare').textContent = 
                `$${(stats.totalCreatorEarnings / 10).toFixed(2)}`;
            document.getElementById('ownerShare').textContent = 
                `$${(stats.totalOwnerEarnings / 10).toFixed(2)}`;
            
            // Afficher les transactions
            const container = document.getElementById('transactionsList');
            if (transactions.length === 0) {
                container.innerHTML = `
                    <div class="empty-state">
                        <i class="fas fa-exchange-alt"></i>
                        <h3>Aucune transaction</h3>
                        <p>Les transactions de cadeaux appara√Ætront ici</p>
                    </div>
                `;
                return;
            }
            
            container.innerHTML = transactions.map(transaction => `
                <div class="transaction-item">
                    <div class="transaction-icon">${transaction.giftIcon}</div>
                    <div class="transaction-details">
                        <div class="transaction-title">
                            <strong>${transaction.senderName}</strong> a offert 
                            <strong>${transaction.giftName}</strong> √† 
                            <strong>${transaction.receiverName}</strong>
                        </div>
                        <div class="transaction-info">
                            <span>Vid√©o: ${transaction.videoTitle}</span>
                            <span>‚Ä¢</span>
                            <span>${new Date(transaction.timestamp).toLocaleString('fr-FR')}</span>
                        </div>
                        <div class="transaction-amounts">
                            <span class="amount creator">Cr√©ateur: +$${(transaction.creatorShare / 10).toFixed(2)}</span>
                            <span class="amount owner">Propri√©taire: +$${(transaction.ownerShare / 10).toFixed(2)}</span>
                        </div>
                    </div>
                    <div class="transaction-total">
                        <div class="total-amount">$${transaction.giftPrice.toFixed(2)}</div>
                        <div class="total-coins">${transaction.giftCoins} coins</div>
                    </div>
                </div>
            `).join('');
        }
        
        // Charger au d√©marrage
        document.addEventListener('DOMContentLoaded', loadTransactions);
    </script>
</body>
</html>